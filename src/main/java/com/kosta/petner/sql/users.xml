<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.users">
		<!-- 회원가입 -->
	<insert id="insertUsers" parameterType="com.kosta.petner.bean.Users">
		<![CDATA[
			INSERT INTO USERS(user_no, 
							 user_type, 
							 id, 
							 nickname, 
							 email, 
							 password, 
							 name, 
							 joindate, 
							 gender, 
							 zipcode, 
							 addr, 
							 addr_detail, 
							 user_level, 
							 user_auth, 
							 file_no)
				values(seq_user_no.nextval, 
							#{user_type}, 
							#{id},
							#{nickname}, 
							#{email}, 
							#{password},
							#{name},
							 sysdate, 
							#{gender}, 
							#{zipcode},
							#{addr}, 
							#{addr_detail},
							'bronze',
							 1,
							 0)					
		]]>
	</insert>
	
	
	<select id= "selectId" parameterType = "String" resultType= "com.kosta.petner.bean.Users" >
	<![CDATA[
	select * from users where id =#{id}
	]]>	
	</select>
	
	
	<select id="getByIdAndPassword" parameterType="map" resultType="com.kosta.petner.bean.Users">
	<![CDATA[
		select *
		from users 
		where id=#{id} and password=#{password}
	]]>
	</select>
	
	<select id="getId" parameterType="map" resultType="com.kosta.petner.bean.Users">
	<![CDATA[
		select *
		from users
		where name=#{name,jdbcType=VARCHAR} and email=#{email}
	]]>
	</select>
	
	<select id="getPassword" parameterType="com.kosta.petner.bean.Users" resultType="com.kosta.petner.bean.Users">
	<![CDATA[
	    select  *
	    from users
	    where id = #{id}
	    and   name = #{name}
	    and   email = #{email}
	]]>    
	</select>
 
    
	<update id="updatePw" parameterType="com.kosta.petner.bean.Users">
	<![CDATA[ 
	    update users 
	    set password = #{password,jdbcType=VARCHAR}
	    where id = #{id,jdbcType=VARCHAR}
	    and email = #{email}
	 
	]]>    
	</update>
	
<<<<<<< HEAD
	
=======
	<!-- 마이페이지 나의 정보 221113DSC 추가 -->
	<select id="getMyinfo" resultType="com.kosta.petner.bean.Users">
		<![CDATA[
		    select  *
		    from users
		    where id = #{id}		    
		]]> 
	</select>
	<update id="updateMyinfo" parameterType="com.kosta.petner.bean.Users">
	<![CDATA[
	    update users 
	    set nickname = #{nickname,jdbcType=VARCHAR},
	    		email = #{email},
	    		zipcode = #{zipcode},
	    		addr = #{addr},
	    		addr_detail = #{addr_detail}	    		
	    where id = #{id,jdbcType=VARCHAR}
	    
	]]>    
	</update>

>>>>>>> 65f0f729fe214b597b093506aad9949f4fbd411e
	
</mapper>